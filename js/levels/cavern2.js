/**
 * Deep Cavern Level (underground chasm)
 * Original design for NetHack JavaScript port
 */

import { des, selection, finalize_level } from '../sp_lev.js';

export function generate() {
    des.level_init({ style: 'solidfill', fg: '-' });

    des.level_flags('mazelevel');

    // Deep underground cavern with narrow passages
    des.map({
        map: `
-----------------------------------------------------
--.................................................|--
--....................................................--
--|......................................................--
  --......................................................--
   --.......................................................--
    --........................................................--
     --.........................................................--
      --.....................................-----..............--
       --.................................--|.....|--............--
        --..................................|.......|............--
         --.................................|.......|............--
          --.................................--------............--
           --........................................................--
            --........................................................--
           --........................................................--
          --.........................................................--
         --..........................................................--
        --...........................................................--
       --............................................................--
      --..................................-----.....................--
     --................................--|.....|--..................--
    --...................................|.......|..................--
   --...................  ................|.......|..................--
  --......................................................-----------
---|..............................................................|---
   ------------------------------------------------------
`
    });

    // Dark and foreboding
    des.region(selection.area(0, 0, 75, 26), 'unlit');

    // Stairs
    des.stair('up', 25, 13);
    des.stair('down', 45, 20);

    // Non-diggable
    des.non_diggable();

    // Objects
    for (let i = 0; i < 12; i++) {
        des.object();
    }

    // Many traps
    for (let i = 0; i < 10; i++) {
        des.trap();
    }

    // Deep dwellers
    des.monster({ id: 'purple worm' });
    des.monster({ id: 'purple worm' });
    des.monster({ id: 'umber hulk' });
    des.monster({ id: 'umber hulk' });
    des.monster({ id: 'minotaur' });
    des.monster({ id: 'minotaur' });
    des.monster({ id: 'cave troll' });
    des.monster({ id: 'cave troll' });
    des.monster({ id: 'rock troll' });
    des.monster({ id: 'earth elemental' });
    des.monster({ id: 'xorn' });
    des.monster({ id: 'xorn' });
    des.monster({ id: 'stone giant' });
    des.monster({ id: 'hill giant' });

    // Random monsters
    for (let i = 0; i < 14; i++) {
        des.monster();
    }

    return finalize_level();
}
